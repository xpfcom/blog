{"singlePage": [], "startSite": "04/16/2025", "filingNum": "", "onePageListNum": 15, "commentLabelColor": "#006b75", "yearColorList": ["#bc4c00", "#0969da", "#1f883d", "#A333D0"], "i18n": "CN", "themeMode": "manual", "dayTheme": "light", "nightTheme": "dark", "urlMode": "pinyin", "script": "", "style": "", "head": "", "indexScript": "", "indexStyle": "", "bottomText": "", "showPostSource": 1, "iconList": {}, "UTC": 8, "rssSplit": "sentence", "exlink": {}, "needComment": 1, "allHead": "", "title": "x-Blog", "subTitle": "\u270c\ufe0f \u968f\u7b14\u5c0f\u8bb0\ud83d\udd38\u6280\u672f\u5206\u4eab", "avatarUrl": "https://raw.githubusercontent.com/xpfcom/blog/refs/heads/main/logo.svg", "GMEEK_VERSION": "last", "postListJson": {"P1": {"htmlDir": "docs/post/cloudflare Tunnels & R2S ImmortalWrt -shi-jian-fen-xiang.html", "labels": ["\u968f\u7b14"], "postTitle": "cloudflare Tunnels & R2S ImmortalWrt \u5b9e\u8df5\u5206\u4eab", "postUrl": "post/cloudflare%20Tunnels%20%26%20R2S%20ImmortalWrt%20-shi-jian-fen-xiang.html", "postSourceUrl": "https://github.com/xpfcom/blog/issues/1", "commentNum": 0, "wordCount": 1895, "description": "## cloudflare\uff1a\u70b9\u51fbZero Trust\u2192\u70b9\u51fbNetworks\u2192\u70b9\u51fbTunnels\u2192\u70b9\u51fb+Create a tunnel\u2192\u9009\u62e9Cloudflared\u2192\u70b9\u51fbNext\n_________________________________\n\n## \u96a7\u9053\u540d\u79f0\uff1aTunnel 1\n\n#### 1\u3001\u96a7\u9053\u63e1\u624b\u7801\uff08\u5907\u6ce8\uff09\uff1a\n```\n++eyJhIjoiNWVjMDk2OGYyNTUzMmJhZDg4ODRhZTI5ZjhNThjNjAiLCJ0IjoiNTNmZWEzOGEtNDMwMy00YzgzLThkNDMtNzE3ZTlkYTNjYjI3IiwicyI6IlpUWTFNMlJoWkRRdFpEVmtOUzAwTVRFMkxXRmhaVGt0WmpKbU1UUXhOMk5tTnpOayJ9++\n```\n\n_________________________________\n\n#### 2\u3001OpenWrt\u5b89\u88c5\u7a0b\u5e8f\n\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/cloudflare/cloudflared/releases/\uff08\u5982\u66f4\u65b0 \u66ff\u6362\u4e0b\u65b9\u4ee3\u7801\u65e5\u671f\uff09\n```\nVERSION='2024.6.1'\ncurl -O -L \\\nhttps://github.com/cloudflare/cloudflared/releases/download/${VERSION}/cloudflared-linux-arm64 \\\n&& chmod +x cloudflared-linux-arm64 \\\n&& mv cloudflared-linux-arm64 /usr/bin/cloudflared\n```\n\n_________________________________\n\n#### 3\u3001\u521b\u5efa\u6587\u4ef6 \u8d4b\u4e88\u53ef\u6267\u884c\u6743\u9650\n```\ntouch /etc/init.d/cloudflared\nchmod +x /etc/init.d/cloudflared\n```\n\n_________________________________\n\n#### 4\u3001SSH\u66ff\u6362 /ect/init.d/cloudflare \u6587\u4ef6\u4ee3\u7801\n```\n#!/bin/sh /etc/rc.common\nUSE_PROCD=1\nSTART=95\nSTOP=01\ncfd_init='/etc/init.d/cloudflared'\ncfd_token='++eyJhIjoiNWVjMDk2OGYyNTUzMmJhZDg4ODRhZTI5ZjhNThjNjAiLCJ0IjoiNTNmZWEzOGEtNDMwMy00YzgzLThkNDMtNzE3ZTlkYTNjYjI3IiwicyI6IlpUWTFNMlJoWkRRdFpEVmtOUzAwTVRFMkxXRmhaVGt0WmpKbU1UUXhOMk5tTnpOayJ9++'\nboot()\n{\nubus -t 30 wait_for network.interface network.loopback 2>/dev/null\nrc_procd start_service\n}\nstart_service() {\nif [ $('${cfd_init}' enabled; printf '%u' ${?}) -eq 0 ]\nthen\nprocd_open_instance\nprocd_set_param command /usr/bin/cloudflared --no-autoupdate tunnel run --token ${cfd_token}\nprocd_set_param stdout 1\nprocd_set_param stderr 1\nprocd_set_param respawn ${respawn_threshold:-3600} ${respawn_timeout:-5} ${respawn_retry:-5}\nprocd_close_instance\nfi\n}\nstop_service() {\npidof cloudflared && kill -SIGINT `pidof cloudflared`\n}\n```\n\n_________________________________\n\n##### 5\u3001\u8bbe\u7f6e cloudflared \u6587\u4ef6\u5f00\u673a\u542f\u52a8 \u8fd0\u884c cloudflared \u6587\u4ef6\n```\n/etc/init.d/cloudflared enable\n/etc/init.d/cloudflared start\n```\u3002", "top": 0, "createdAt": 1744815596, "style": "", "script": "", "head": "", "ogImage": "https://raw.githubusercontent.com/xpfcom/blog/refs/heads/main/logo.svg", "createdDate": "2025-04-16", "dateLabelColor": "#0969da"}}, "singeListJson": {}, "labelColorDict": {"\u968f\u7b14": "#0E8A16"}, "displayTitle": "x-Blog", "faviconUrl": "https://raw.githubusercontent.com/xpfcom/blog/refs/heads/main/logo.svg", "ogImage": "https://raw.githubusercontent.com/xpfcom/blog/refs/heads/main/logo.svg", "primerCSS": "<link href='https://mirrors.sustech.edu.cn/cdnjs/ajax/libs/Primer/21.0.7/primer.css' rel='stylesheet' />", "homeUrl": "https://xpfcom.github.io/blog", "prevUrl": "disabled", "nextUrl": "disabled"}